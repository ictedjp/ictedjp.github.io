
<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta http-equiv="content-language" content="ja" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ひらがな・カタカナ練習</title>

    <style>
        html, body {
            width: 100%;
            height: 100%;
            border: 0;
            overflow: auto;
            background-color: #8cffb4;
        }

        .container {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
background-color: #8cffb4;
        }

        .content {
            width: fit-content;
            height: fit-content;
      background-color: #8cffb4;
            position: absolute;
        }

        @media (min-width: 460pt) {
            .content {
                top: 0;
                left: 0;
                transform: none;
                width: 100%;
                height: 100%;
            }
        }

        @media (max-width: 460pt) {
            .container {
                align-items: flex-start;
            }
            .content {
                top: 0;
                left: 0;
                transform: none;
                width: 100vh;
            }
        }
    </style>
</head>

    <script>
      TBSpline=function(pts){
        this.pts = [];
        for(var i = 0;i<pts.length;i++){
            this.pts.push(pts[i]);
        }
        this.ptsNum=this.pts.length;
        this.calcBasis=function(ptNo,tt){
          let ret;
          let nt;
          if(tt<(ptNo-1.5)){
            ret=0;
          }else if(tt<(ptNo-0.5)){
            nt = (tt-(ptNo-1.5));
            ret = 0.5*nt*nt;
          }else if(tt<(ptNo+0.5)){
            nt = (tt - ptNo);
            ret = 0.75-(nt*nt);
          }else if(tt<(ptNo+1.5)){
            nt = (tt-(ptNo+1.5));
            ret = 0.5*nt*nt;
          }else{
            ret=0;
          }
          return ret;
        }

        //t=0.0～1.0
        this.calc=function(t){
          let tt=t*this.ptsNum-0.5;
          let f=[];
          let fSum=0;
          for(let i=0;i<this.ptsNum;i++){
            f[i]=this.calcBasis(i,tt);
            fSum+=f[i];
          }
          for(let i=0;i<this.ptsNum;i++){
            f[i]/=fSum;
          }
          let xy=[];
          xy[0]=0;
          xy[1]=0;
          for(let i=0;i<this.ptsNum;i++){
            xy[0]+=this.pts[i][0]*f[i];
            xy[1]+=this.pts[i][1]*f[i];
          }
          return xy;
        }
      }

      TSPDraw=function(ctx,pts,wh){
        this.lineNum=0;
        this.t=0;
        this.flag=false;
        this.pts=pts.slice();
        this.step=0.02;
        this.ctx=ctx;
        this.spline=null;
        this.degree=2;
        this.xy=[];
        this.isEnd=false;
        this.ctx.strokeStyle="rgb(150,150,150)";//線の色
        this.ctx.lineWidth=wh/160;//線の太さ
        this.ctx.lineJoin="round";
        this.ctx.lineCap="round";
        this.ctx.fillStyle="rgb(255,255,255)";
        this.ctx.fillRect(0,0,wh,wh);

        this.ctx.beginPath();
        this.ctx.moveTo(0,wh/2);
        this.ctx.lineTo(wh,wh/2);
        this.ctx.moveTo(wh/2,0);
        this.ctx.lineTo(wh/2,wh);
        this.ctx.stroke();

        this.ctx.strokeStyle="rgb(255,100,100)";//線の色
        this.ctx.lineWidth=wh/20;//線の太さ

        this.draw=function(){
          if(this.flag==false && this.lineNum>=pts.length){
            this.flag=false;
            this.t=0;
            this.lineNum=0;
          }else if(this.flag==false){
            if(this.spline!==null){delete this.spline;this.spline=null;}
            this.spline=new TBSpline(this.pts[this.lineNum]);
            this.xy=this.spline.calc(0).slice();
            this.t=0;
            this.flag=true;
            this.step=1/5/this.pts[this.lineNum].length;
          }
          if(this.flag){
            this.t+=this.step;
            if(this.t>1.0){
              this.flag=false;
              this.lineNum++;
            }else{
              if(!this.isEnd){
                let pos =[];
                pos=this.spline.calc(this.t).slice();
                this.ctx.lineJoin="round";
                this.ctx.lineCap="round";
                this.ctx.beginPath();

            // Set stroke color based on lineNum
            if (this.lineNum === 4) {
              this.ctx.strokeStyle = "rgb(160, 32, 273)"; // Purple
            } else if (this.lineNum === 3) {
              this.ctx.strokeStyle = "rgb(255, 165, 0)"; // Orange
            } else if (this.lineNum === 2) {
              this.ctx.strokeStyle = "rgb(100, 255, 100)"; // Green
            } else if (this.lineNum === 1) {
              this.ctx.strokeStyle = "rgb(100, 100, 255)"; // Blue
            } else if (this.lineNum === 0) {
              this.ctx.strokeStyle = "rgb(255, 100, 100)"; // Red
            } else {
              this.ctx.strokeStyle = "rgb(150, 150, 150)"; // Gray
            }


                this.ctx.moveTo(this.xy[0],this.xy[1]);
                this.ctx.lineTo(pos[0],pos[1]);
                this.ctx.stroke();
                this.xy = pos.slice();
              }
            }
            if(this.isEnd){
              if(this.spline!==null){delete this.spline;this.spline=null;}
              return;
            }else{
              setTimeout(this.draw.bind(this),70);//描画速度
            }
          }else{
            //終了処理
            console.log('finish');
            if(this.spline!==null){delete this.spline;this.spline=null;}
            return;
          }
        }
        setTimeout(this.draw.bind(this),70);
      }


      var charArr={
            "あ":[
              [[4,5],[8,4.8],[13.4,3.8]],
              [[8.5,1.4],[7,10.4],[8.2,18]],
              [[13,7],[9,15.4],[5,18],[2.5,16.5],[3,12.5],[9.5,8.5],[14.5,9],[18,11.5],[18,16],[15,18],[12.5,18.7]]
            ],
            "い":[
              [[2.8,5],[2.8,9],[4,13.8],[6.4,16.4],[6.4,16.4],[8.4,13.2]],
              [[14,5],[16,8],[17.6,11.6]]
            ],
            "う":[
              [[8.2,1.4],[10.6,2.2],[13,3.5]],
              [[5,8],[11,6],[14,8.4],[14.4,12],[13,16.2],[9.5,18.6]]
            ],
            "え":[
              [[7.4,1.6],[9,2.2],[12,3.4]],
              [[4.2,7.7],[8,7.1],[12.4,6.3],
                [12.4,6.3],[7.5,12.4],[3.4,17.5],
                [3.4,17.5],[6.2,14],[10.5,12],[11.6,12.5],[10.5,16.6],[12.5,18.2],[17.4,17.6]]
            ],
            "お":[
              [[2.5,7],[7,6],[10,5]],
              [[6.5,1.8],[6.5,16],[6.5,18.3],[4,18],[2.6,16],[3,14.6],[7,12],[12,10.4],[16.8,11.2],[17.6,15],[15.2,17.4],[12.4,17.5]],
              [[14.5,3.5],[17,5.5],[18.5,7]]
            ],
            "か":[
              [[1.7,8],[10,7],[10.4,11],[9.4,15],[7.4,17.8],[7.4,17.8],[5.8,16.6]],
              [[7.8,2.4],[5.2,10],[2,16],],
              [[14.6,6],[17,8.6],[18.6,11]]
            ],

            "き":[
              [[4,5.6],[10,4.6],[14,3.8]],
              [[6,9.6],[10,9],[15.6,7.6]],
              [[8.2,1.4],[10.6,6.6],[14.4,12.5],[14.4,12.5],[12,12.4]],
              [[5.8,15],[7.5,17.4],[11,18.2],[13,18.2]]
            ],
            "く":[
              [[13.4,1.8],[9.4,6],[5.2,9.5],[5.2,10.5],[9.8,14],[13.5,18.5]]
            ],
            "け":[
              [[4.6,3],[3.6,12],[4.4,16.4],[4.4,16.4],[5.4,14]],
              [[9,7.6],[14,7],[18.6,6.5]],
              [[14.4,2],[15,9],[14.6,15],[11.6,18.6]]
            ],
            "こ":[
              [[5.4,4],[10.4,3.8],[14.2,5],[14.2,5],[13,6],[12.4,6.6]],
              [[4.8,13.4],[6.4,15.4],[10,16.4],[15,16]],
            ],
            "さ":[
              [[2.8,7.4],[11,6],[16.4,4.6]],
              [[8.6,1.6],[11,6],[14.8,11.4],[14.8,11.4],[12,11]],
              [[6,13.4],[7,15.8],[9,17.4],[13,17.8]]
            ],
            "し":[
              [[6,2.4],[6,6],[5.4,14],[7.4,17],[10,17.6],[13,17],[16,13]]
            ],
            "す":[
              [[1.8,6.2],[11,5],[18,4.6]],
              [[11.5,1],[12.2,12],[9.6,14.8],[6.2,11],[9,7.8],[11.4,10],[11.4,14],[10.2,17],[8.4,18.4]]
            ],
            "せ":[
              [[1.8,9],[10,7.2],[19,5.8]],
              [[14,2],[14,7],[13.4,12],[13.4,12],[12,11.2]],
              [[5.8,3.2],[6.3,9],[6.2,14],[8,16.4],[16,16.2]]
            ],
            "そ":[
              [[5.8,3.2],[9,3],[13.6,2.3],[13.6,2.3],[8,7.4],[2.8,10.2],[2.8,10.2],[17,8],[17,8],[11,10.5],[9,15.4],[13.6,18.4]]
            ],
            "た":[
              [[3,6.2],[7,6],[11.2,5.3]],
              [[7.8,2],[5.4,10.8],[2.8,17]],
              [[10.4,10],[14,9.2],[16.8,9.6]],
              [[10.3,15.2],[13,17.2],[17,17.6]]
            ],
            "ち":[
              [[2.8,6],[8,5.7],[13.8,4.8]],
              [[8.8,1.4],[7,9],[6.3,13.1],[6.3,13.1],[9,11.6],[13,10.6],[15.8,12],[16.4,14.8],[13.2,17.6],[10,18]],
            ],
            "つ":[
              [[1.6,7.6],[7,6.5],[15.8,5.5],[18,10],[16.2,13.8],[10.5,16]],
            ],
            "て":[
              [[2.4,5.6],[10,4.6],[17,3],[17,3],[13,5.4],[10,9],[9.4,13],[11.6,16],[14.6,17.2]]
            ],
            "と":[
              [[5.4,2.6],[6.2,4],[8,9.4]],
              [[15,5.4],[8,9.6],[4.6,14],[6.8,17],[15,17]]
            ],
            "な":[
              [[2.4,5.6],[6,5.4],[10,4.6]],
              [[7.6,1.8],[5.7,7],[3,12]],
              [[14,5.2],[16,6.2],[17.5,7.9],[17.5,7.9],[16,8.2]],
              [[12.2,10],[12,12],[12.4,17.4],[10,18.6],[6.8,15.8],[9.4,13.4],[16,16.2]]
            ],
            "に":[
              [[4,3],[3,13],[4,17],[4.4,17],[4.6,16],[5.4,14]],
              [[10.2,6,5],[14,5],[17,5]],
              [[9.8,13.5],[12,15.6],[17.4,16]]
            ],
            "ぬ":[
              [[4,4],[5.2,11],[7.6,16]],
              [[11,2.8],[8.6,12.4],[3.4,17.4],[1.2,12.6],[5,8],[12.4,5],[16,6.4],[18,10],[16.8,15],[13.4,17.6],[10.4,15],[13.4,12.4],[19,17]]
            ],
            "ね":[
              [[5.6,2],[5.4,8],[5.2,18.4]],
              [[1.2,8],[6.5,6.2],[6.5,6.2],[4,11.4],[1.2,15.6],[1.2,15.6],[7,10],[13,4.4],[17,7],[16.4,13],[15.4,17.2],[12,17.4],[10.1,16.4],[10.8,14],[13.2,13.4],[16,14.6],[18.6,17]],
            ],
            "の":[
              [[9.6,4.6],[9.4,11],[4.2,17],[1.8,11.2],[3.8,7],[9.2,3.6],[16.2,5.4],[17.6,11],[15.8,15.2],[12.6,17]],
            ],
            "は":[
              [[4,2.8],[3,13],[4,17.2],[4,17.2],[4.4,16],[5,15]],
              [[8.8,7],[14,6.2],[17.4,6]],
              [[14.3,2],[14.2,9],[14.8,16],[11.6,17.8],[7.8,15.2],[10.2,13],[18,16]]
            ],
            "ひ":[
              [[2.4,4.8],[5,4.2],[8.8,3],[8.8,3],[4,10],[4.2,15.4],[8,17.6],[13,16],[14.6,10],[14.8,5],[14.8,5],[16.9,9],[18.6,11]],
            ],
            "ふ":[
              [[7.8,2.2],[10.2,3],[12,4.6],[12,4.6],[10,5.8]],
              [[9.2,10],[12.6,14.6],[10.4,18.4],[6.6,16.4]],
              [[1.4,13],[2.2,16],[3,17],[3,17],[4,15]],
              [[16,11.6],[17.5,13],[18.6,15]]
            ],
            "へ":[
              [[1.6,10.8],[3.6,9],[7,5.6],[7,5.6],[13,11],[18,14.6]],
            ],
            "ほ":[
              [[3.8,3],[2.8,12],[3.8,17.2],[3.8,17.2],[4.6,15]],
              [[9,3.6],[14,3.2],[17.6,3.2]],
              [[9.4,8.4],[14,8.4],[17.4,7.8]],
              [[14.2,3.4],[14.2,15.4],[14,16.8],[11,17.6],[7.9,15.6],[9,14],[12.4,14],[18,17]]
            ],
            "ま":[
              [[4.4,5.6],[11,4.6],[15,4.6]],
              [[5.8,9.6],[9.6,9.8],[14.2,9.2]],
              [[11,1.6],[11,16],[9,18],[5,17.2],[4,15.4],[6,14.2],[11,14.6],[15.4,17.4]]
            ],
            "み":[
              [[5.2,3.8],[8,3.6],[11.4,2.8],[11.4,2.8],[9,9],[5,16],[2.8,16.4],[2,12.2],[7,10.6],[14,11.8],[18.2,13.2]],
              [[16.4,9],[15.1,14.4],[12.3,18]]
            ],
            "む":[
              [[2.4,6.6],[7,6.2],[10.4,5.4]],
              [[7.2,1.8],[7.4,14],[4.8,18.2],[2.2,14.4],[4.6,11],[6.4,12],[7.2,17],[10.4,17.8],[14.4,17],[15.8,14],[15.4,11]],
              [[14.6,3.6],[16.4,5],[17.8,6.8]]
            ],
            "め":[
              [[4.2,4.2],[6.6,12],[9.2,16.6]],
              [[12.4,2.2],[9.8,12],[4,18.4],[1.6,13],[4.2,8.8],[10,5.6],[16,7],[18,12],[16.4,16],[13.2,18.4]]
            ],
            "も":[
              [[8.8,1.4],[6,15],[10,19],[15,17],[16,13.8],[15.4,10.4]],
              [[3.2,5.6],[7,5.4],[11,5.4]],
              [[3.2,11.2],[7,11.4],[11,11]]
            ],
            "や":[
              [[1.8,9.9],[14.6,4],[18.4,7.2],[16.4,10.3],[13.4,10.4]],
              [[9.6,1.6],[11.2,2.4],[12.4,3.8],[12.4,3.8],[10.8,3.8]],
              [[4.2,3.4],[7,10.8],[10.4,17.8]],
            ],
            "ゆ":[
              [[2.5,4.8],[2.8,11],[3.4,13.6],[3.4,13.6],[7,6],[14.6,3.4],[18.8,8.8],[15.6,14.8],[11,15],[9,13.8]],
              [[11.6,1.6],[12,5],[12,14],[10.8,17],[9.4,18.2]]
            ],
            "よ":[
              [[10.2,6.8],[13,6.6],[16,5.8]],
              [[10.2,1.4],[10.3,12],[10,17],[5.8,18],[2.6,15.4],[5,13.4],[10,13.8],[16,16.6]],
            ],
            "ら":[
              [[8,1.4],[10,2.8],[11,4],[11,4],[9.4,4.3]],
              [[6.4,6],[5.4,11],[5.2,13.2],[5.2,13.2],[12.6,10.4],[16.2,13.6],[13.6,17.4],[9.4,18.3]]
            ],
            "り":[
              [[6.2,2],[5.4,7],[6.2,11.2],[6.2,11.2],[7.2,9.6]],
              [[13.4,2],[14,11],[11.8,16.6],[10,18.2]]
            ],
            "る":[
              [
                [5.8,3.4],[9,3.2],[12.8,2.4],[12.8,2.4],[8,8.4],[3.6,12.8],
                [3.6,12.8],[11,9],[16.2,11.4],[16,16],[10,18.6],[6.8,16.6],[8,14.2],[11.4,14.8],[13,17]
              ]
            ],
            "れ":[
              [[5.8,1.8],[5.2,15],[5.3,18.2]],
              [
                [1.4,7.4],[4,6.8],[6.8,5.8],[6.8,5.8],[4,11],[1.2,14.8],[1.2,14.8],[8,8.4],[14.7,4.2],
                [14.7,4.2],[14.2,15.2],[16.6,16.8],[19,14.2]
              ]
            ],
            "ろ":[
              [
                [5.8,3.4],[9,3],[12.5,2.4],
                [12.5,2.4],[8,8.2],[4,12.4],
                [4,12.4],[10,10],[13.8,10],[16.4,13],[14,17.2],[9.3,18.3]
              ]
            ],
            "わ":[
              [[5.8,1.8],[5.2,15],[5.3,18.2]],
              [
                [1.4,7.4],[4,6.8],[6.8,5.8],[6.8,5.8],[4,11],[1.2,14.8],[1.2,14.8],[8.4,8.8],
                [14.9,6.6],[18.6,11],[16.5,15.7],[12.8,16.9]
              ]
            ],
            "を":[
              [[3.6,4.6],[8,4.6],[13,3.8]],
              [[9.8,1.2],[7,7],[5,9.8],[5,9.8],[9.6,8.2],[10.8,11],[10.6,14]],
              [[16,8.8],[5.8,14],[6.8,17.6],[14.8,17.4]]
            ],
            "ん":[
              [[9.6,2.2],[2.4,16.8],[2.4,16.8],[7,12],[9.4,10.4],[9.4,10.4],[9.2,16.2],[13,17.7],[15.8,16],[17.6,13]]
            ],
            "が":[
              [[1.6,7.6],[9.2,6.8],[10.6,10],[9.2,15],[7.2,18],[7.2,18],[6,17]],
              [[7.4,2.4],[4.6,11],[2.4,15]],
              [[13,6],[15,8],[16.6,11]],
              [[15.2,5],[16.5,6],[17.2,7]],
              [[17,3.6],[18.1,4.6],[19,5.6]],
            ],
            "ぎ":[
              [[3.4,5.6],[9,4.8],[13.2,3.9]],
              [[5,9.6],[11,8.8],[14.9,7.8]],
              [[7.6,1.4],[10,6.8],[13.4,12.4],[13.4,12.4],[11,12.2]],
              [[5,15],[7.4,17.6],[11.8,18]],
              [[15.2,2.8],[16.4,4],[16.8,4.8]],
              [[17.2,1.4],[18.4,2.6],[19,3.5]]
            ],
            "ぐ":[
              [[11.6,1.8],[8,6],[4,10],[4,10],[8.4,14],[11.8,18]],
              [[14.4,3.8],[15.4,4.8],[16.3,6]],
              [[16.2,2.4],[17.4,3.4],[18.4,4.8]]
            ],
            "げ":[
              [[3.6,3.2],[2.6,13.4],[3.6,16.4],[3.6,16.4],[4.6,14.6]],
              [[8,7.6],[14,6.8],[17.6,6.5]],
              [[13.8,2.4],[14,10],[14,14.8],[11.2,18.2]],
              [[16.2,2],[17.2,3],[18,4.2]],
              [[18,0.6],[19,1.4],[19.4,2]]
            ],
            "ご":[
              [[4.3,4.2],[8.8,3.7],[13,5],[13,5],[11.4,6.6]],
              [[3.8,13.6],[6,16],[10,16.8],[14.4,16.2]],
              [[15.2,3.4],[16.4,4.4],[17.4,6]],
              [[17,2],[18.3,3],[19.2,4.3]]
            ],
            "ざ":[
              [[2,7.6],[9,6.4],[15,4.8]],
              [[7.8,2],[10,6.2],[13.6,11.2],[13.6,11.2],[11,11]],
              [[5,13.6],[6.7,17.2],[11.8,17.8]],
              [[15.6,2.6],[16.7,3.6],[17.6,5]],
              [[17.6,1.4],[18.6,2.2],[19.6,3.6]]
            ],
            "じ":[
              [[6,2.4],[6,6],[5.4,14],[7.4,17],[10,17.6],[13,17],[16,13]],
              [[11.2,5],[12.5,6],[13.2,7.2]],
              [[13,3.4],[14.1,4.4],[15.3,5.8]]
            ],
            "ず":[
              [[1.8,6.2],[11,5],[18,4.6]],
              [[11.5,1],[12.2,12],[9.6,14.8],[6.2,11],[9,7.8],[11.4,10],[11.4,14],[10.2,17],[8.4,18.4]],
              [[15,1.2],[16.1,2],[17,3.2]],
              [[17.4,0.8],[18.6,1.8],[19.4,2.8]]
            ],
            "ぜ":[
              [[1.8,9],[10,7.2],[19,5.8]],
              [[14,2],[14,7],[13.4,12],[13.4,12],[12,11.2],[10.8,10.5]],
              [[5.8,3.2],[6.3,9],[6.2,14],[8,16.4],[16,16.2]],
              [[15.5,1.2],[16.6,2],[17.5,3.2]],
              [[17.4,0.8],[18.6,1.8],[19.4,2.8]]
            ],
            "ぞ":[
              [[5.8,3.2],[9,3],[13.6,2.3],[13.6,2.3],[8,7.4],[2.8,10.2],[2.8,10.2],[17,8],[17,8],[11,10.5],[9,15.4],[13.6,18.4]],
              [[15.1,1.2],[16.2,2],[17.1,3.2]],
              [[17.4,0.8],[18.6,1.8],[19.4,2.8]]
            ],
            "だ":[
              [[3,6.2],[7,6],[11.2,5.3]],
              [[7.8,2],[5.4,10.8],[2.8,17]],
              [[10.4,10],[14,9.2],[16.8,9.6]],
              [[10.3,15.2],[13,17.2],[17,17.6]],
              [[15.2,2.6],[16,3.4],[17.2,5]],
              [[17,1.2],[18,2.1],[19,3.2]],
            ],
            "ぢ":[
              [[2.8,6],[8,5.7],[13.8,4.8]],
              [[8.8,1.4],[7,9],[6.3,13.1],[6.3,13.1],[9,11.6],[13,10.6],[15.8,12],[16.4,14.8],[13.2,17.6],[10,18]],
              [[15.2,2.6],[16,3.4],[17.2,5]],
              [[17,1.2],[18,2.1],[19,3.2]],
            ],
            "づ":[
              [[1.6,7.6],[7,6.5],[15.8,5.5],[18,10],[16.2,13.8],[10.5,16]],
              [[15.2,2.6],[16,3.4],[17.2,5]],
              [[17,1.2],[18,2.1],[19,3.2]],
            ],
            "で":[
              [[1.4,6],[9,4.6],[14,4],[14,4],[12,5.4],[9,9],[8.4,13],[10.2,16],[13.6,17.8]],
              [[15.2,2.6],[16,3.4],[17.2,5]],
              [[17,1.2],[18,2.1],[19,3.2]],
            ],
            "ど":[
              [[4.4,2.6],[5.2,4],[7,9.4]],
              [[14,5.4],[7,9.6],[3.6,14],[5.8,17],[14,17]],
              [[15.2,2.6],[16,3.4],[17.2,5]],
              [[17,1.2],[18,2.1],[19,3.2]],
            ],
            "ば":[
              [[3,2.8],[2,13],[3,17.2],[3,17.2],[3.4,16],[4,15]],
              [[7.8,7],[13,6.2],[16.4,6]],
              [[13.3,2],[13.2,9],[13.8,16],[10.6,17.8],[6.8,15.2],[9.2,13],[17,16]],
              [[16.2,2],[17.2,3],[18,4.2]],
              [[18,0.6],[19,1.4],[19.4,2]]
            ],
            "び":[
              [[2.4,4.8],[5,4.2],[8.8,3],[8.8,3],[4,10],[4.2,15.4],[8,17.6],[13,16],[14.6,10],[14.8,5],[14.8,5],[16.9,9],[18.6,11]],
              [[16.2,2],[17.2,3],[18,4.2]],
              [[18,0.6],[19,1.4],[19.4,2]]
            ],
            "ぶ":[
              [[7.8,2.2],[10.2,3],[12,4.6],[12,4.6],[10,5.8]],
              [[9.2,10],[12.6,14.6],[10.4,18.4],[6.6,16.4]],
              [[1.4,13],[2.2,16],[3,17],[3,17],[4,15]],
              [[16,11.6],[17.5,13],[18.6,15]],
              [[15.2,2.6],[16,3.4],[17.2,5]],
              [[17,1.2],[18,2.1],[19,3.2]],
            ],
            "べ":[
              [[1.6,10.8],[3.6,9],[7,5.6],[7,5.6],[13,11],[18,14.6]],
              [[12.8,4.2],[13.8,5.2],[15,6.6]],
              [[15.4,3.2],[16.4,4],[17.3,5]]
            ],
            "ぼ":[
              [[2.8,3],[1.8,12],[2.8,17.2],[2.8,17.2],[3.6,15]],
              [[7,4.4],[12,4],[15.6,4]],
              [[7.4,8.4],[12,8.4],[15.4,7.8]],
              [[12.2,4.4],[12.2,15.4],[12,16.8],[9,17.6],[5.9,15.6],[7,14],[10.4,14],[16,17]],
              [[16.6,2],[17.6,3],[18.4,4.2]],
              [[18,0.6],[19,1.4],[19.4,2]]
            ],
            "ぱ":[
              [[3,2.8],[2,13],[3,17.2],[3,17.2],[3.4,16],[4,15]],
              [[7.8,7],[13,6.2],[16.4,6]],
              [[13.3,2],[13.2,9],[13.8,16],[10.6,17.8],[6.8,15.2],[9.2,13],[17,16]],
              [[17.4,1],[18,1.05],[18.8,2.4],[17.4,4],[16,2.4],[16.8,1.05],[17.4,1]]
            ],
            "ぴ":[
              [[2.4,4.8],[5,4.2],[8.8,3],[8.8,3],[4,10],[4.2,15.4],[8,17.6],[13,16],[14.6,10],[14.8,5],[14.8,5],[16.9,9],[18.6,11]],
              [[17.4,1],[18,1.05],[18.8,2.4],[17.4,4],[16,2.4],[16.8,1.05],[17.4,1]]
            ],
            "ぷ":[
              [[7.8,2.2],[10.2,3],[12,4.6],[12,4.6],[10,5.8]],
              [[9.2,10],[12.6,14.6],[10.4,18.4],[6.6,16.4]],
              [[1.4,13],[2.2,16],[3,17],[3,17],[4,15]],
              [[16,11.6],[17.5,13],[18.6,15]],
              [[17.4,2],[18,2.05],[18.8,3.4],[17.4,5],[16,3.4],[16.8,2.05],[17.4,2]]
            ],
            "ぺ":[
              [[1.6,10.8],[3.6,9],[7,5.6],[7,5.6],[13,11],[18,14.6]],
              [[15.4,3],[16,3.05],[16.8,4.4],[15.4,6],[14,4.4],[14.8,3.05],[15.4,3]]
            ],
            "ぽ":[
              [[2.8,3],[1.8,12],[2.8,17.2],[2.8,17.2],[3.6,15]],
              [[7,4.4],[12,4],[15.6,4]],
              [[7.4,8.4],[12,8.4],[15.4,7.8]],
              [[12.2,4.4],[12.2,15.4],[12,16.8],[9,17.6],[5.9,15.6],[7,14],[10.4,14],[16,17]],
              [[18.4,1],[19,1.05],[19.8,2.4],[18.4,4],[17,2.4],[17.8,1.05],[18.4,1]]
            ],
                  "ア":[
              [[3,5.4],[7,5.3],[16,4.5],[16.5,5],[15,8],[12.2,10]],
              [[10,8],[9.5,14],[6,17.4]]
            ],
            "イ":[
              [[15,3],[11,7.8],[4,11.5]],
              [[11,8],[11,17]]
            ],
            "ウ":[
              [[10,2],[10.1,6]],
              [[4,5.8],[4.6,11]],
              [[4,6.5],[16,5.8],[16.2,6],[15,12.8],[9,17.4]]
            ],
            "エ":[
              [[5,6],[9,6],[14.2,5.4]],
              [[10,5.8],[10,14.5]],
              [[2,15],[4,15],[18,14]]
            ],
            "オ":[
              [[4,7],[6,7],[17,6.3]],
              [[12,2],[12.2,5],[12.2,17.5],[12.1,17.2],[8,15.4]],
              [[12,7],[8,12],[3,14.6]]
            ],
            "カ":[
              [[4,7.4],[5,7.3],[15,6.6],[15.6,7],[13,17.2],[12.2,17.2],[9.4,15.4]],
              [[10.4,2.5],[8.6,11],[3.2,16.4]]
            ],
            "キ":[
              [[4,7],[9,6.2],[14,5]],
              [[3,12.6],[10,11.4],[17,10]],
              [[8.2,2.4],[11.6,17.8]]
            ],
            "ク":[
              [[9.4,3.2],[8,6.2],[4.6,9.2]],
              [[9.4,4],[15,3.8],[15.2,4],[13,11],[4.8,17.4]]
            ],
            "ケ":[
              [[7.2,3],[6,7.0],[2.4,10.4]],
              [[6,7],[17.4,6.4]],
              [[12,7],[11,13.4],[7,17.4]]
            ],
            "コ":[
              [[4.4,6],[14.8,5.2],[15.2,5.6],[14,14.8]],
              [[4.2,15.5],[6,15.2],[15,14.8]]
            ],
            "サ":[
              [[2,8],[7,7.7],[18,6.8]],
              [[7,3.4],[7.1,12]],
              [[13.5,2.2],[13.2,13],[9.2,17.8]]
            ],
            "シ":[
              [[5,3.4],[7,4.3],[9,6]],
              [[2.8,8],[5,8.8],[7,10.4]],
              [[5,16.8],[11,14.6],[17.2,8]]
            ],
            "ス":[
              [[4.6,5],[14,4],[14.4,4.4],[10,12],[3,16.8]],
              [[10.4,11.2],[13,12.6],[16.4,16.2]]
            ],
            "セ":[
              [[1.8,9],[10,7.2],[16,6],[16.4,6.4],[15.8,8],[13,11]],
              [[7,2.2],[7.2,14],[8,15.8],[15.8,16]]
            ],
            "ソ":[
              [[3.8,4.4],[6,6.4],[7.2,8.2]],
              [[15.5,3.2],[13,12],[7,17]]
            ],
            "タ":[
              [[9.4,3],[8,6],[4,9.4]],
              [[9,4],[15,4],[15.4,4.4],[13,11.4],[4.8,17.8]],
              [[7.6,8.4],[10,9.8],[12,12]]
            ],
            "チ":[
              [[13,2.2],[10,3.8],[5,5.8]],
              [[2.2,10.2],[13,9],[17.4,9]],
              [[10,4],[10,14],[6.2,17.8]]
            ],
            "ツ":[
              [[3,5],[4.5,6.6],[5.5,8.5]],
              [[8,3.4],[9.2,5],[10,7.2]],
              [[16.4,4],[14,12],[8,16.6]]
            ],
            "テ":[
              [[5.8,4],[10,3.8],[14,3.4]],
              [[2,9.2],[11,8.4],[18,8]],
              [[10,9],[10,14],[6,17.8]]
            ],
            "ト":[
              [[8,2],[8,17.6]],
              [[8,8.2],[11,9],[15,11.4]]
            ],
            "ナ":[
              [[2.4,8.6],[17.2,7.2]],
              [[10,2.4],[10,14],[6.4,17]]
            ],
            "ニ":[
              [[5,6],[9,6],[14.2,5.4]],
              [[2,15],[4,15],[18,14]]
            ],
            "ヌ":[
              [[5.4,4],[14,3.6],[14.4,4],[11,11.8],[3,16.8]],
              [[7,8],[11,10.2],[14.8,13.6]]
            ],
            "ネ":[
              [[8,1.2],[10.2,3],[11,3.8]],
              [[5,6.2],[13.8,5.2],[14.2,5.6],[10,11],[2.2,14.8]],
              [[10,11],[10,18]],
              [[12,10.4],[14,11.6],[16.8,14]]
            ],
            "ノ":[
              [[14.4,2],[10.4,12],[3.8,16.4]]
            ],
            "ハ":[
              [[7,6],[5,11],[2,14]],
              [[13,6.5],[15,9],[17.6,13]]
            ],
            "ヒ":[
              [[15,6.8],[12,7.6],[5.5,8.5]],
              [[5.5,2.6],[5.5,14],[7,16],[16,15.5]]
            ],
            "フ":[
              [[3.6,5.4],[15,4.2],[15.8,5],[13,13],[7,16.6]],
            ],
            "ヘ":[
              [[1.6,10.8],[3.6,9],[7,5.6],[7,5.6],[13,11],[18,14.6]],
            ],
            "ホ":[
              [[3.6,7.1],[7,7],[16.4,6.2]],
              [[10,2],[10.4,17],[9.8,17.2],[7,15.4]],
              [[5.5,10.2],[4,13.4],[2.4,15.2]],
              [[14,10.2],[16,12.8],[17,15.2]]
            ],
            "マ":[
              [[2,6.8],[6,6.4],[16.4,5.8],[16.8,6.2],[14,10.4],[10.2,13]],
              [[7.2,10.2],[10,12.6],[13.2,16.4]],
            ],
            "ミ":[
              [[7,3.2],[10,4],[13.4,5.8]],
              [[7.2,8.2],[10,9.2],[12.6,10.8]],
              [[6,13.4],[10,14.8],[13.8,16.8]],
            ],
            "ム":[
              [[10,3.4],[6.4,10.4],[3.6,14.4],[3.8,15.2],[5,15.6],[15,14]],
              [[12.4,10],[15,12.8],[17,16]]
            ],
            "メ":[
              [[14.8,2.4],[10,12.4],[3.8,16.5]],
              [[7,7],[11,9.6],[15,13]]
            ],
            "モ":[
              [[5,4.4],[8,4.4],[13.2,4]],
              [[2,10.2],[8,9.4],[18,9.4]],
              [[9,4.2],[9,13],[9.4,16],[16,16]]
            ],
            "ヤ":[
              [[2.2,8.4],[16.4,5.4],[16.8,5.8],[15.6,9],[13,11.2]],
              [[7,3],[9,10.8],[10.4,17.8]],
            ],
            "ユ":[
              [[5.2,6.4],[13,6],[13.4,6.4],[12,13.6]],
              [[1.8,14.5],[18,13.6]]
            ],
            "ヨ":[
              [[4.6,5.4],[14.2,4.8],[14.6,5.2],[13.6,14.2]],
              [[5,10],[14,9.6]],
              [[4,15.4],[14.6,14.4]]
            ],
            "ラ":[
              [[5.2,4.4],[9,4.1],[14,3.8]],
              [[3,8.6],[15.4,8],[15.8,8.4],[13,15],[7.8,17.6]]
            ],
            "リ":[
              [[6.4,3],[6.4,10.2]],
              [[13.2,2],[13.2,10],[12.4,13.8],[9,18.4]]
            ],
            "ル":[
              [[6,5],[5.6,12],[2.2,15.8]],
              [[10,3],[10,15.4],[10.4,15.8],[13,15.2],[18.2,10]]
            ],
            "レ":[
              [[6,3],[6,15.6],[6.4,16],[11,14.4],[16,9.4]],
            ],
            "ロ":[
              [[4,5.2],[5.4,15.6]],
              [[4.2,6],[15,5.2],[15.8,6],[13.8,14]],
              [[5,14.6],[14.6,14]]
            ],
            "ワ":[
              [[4,4.2],[4.8,10.2]],
              [[4.2,4.8],[15,4.4],[15.8,5.2],[13.4,13],[8.8,16.6]]
            ],
            "ヲ":[
              [[4.6,4.8],[9,4.7],[15.4,4.2]],
              [[3.8,9.6],[14.4,8.6]],
              [[15.4,4.2],[14,12],[8.2,17]]
            ],
            "ン":[
              [[3.6,4.2],[7,6.2],[8.6,7.6]],
              [[3.8,16.4],[11,14],[17,7.6]]
            ],
            "ガ":[
              [[3,7.4],[14.6,6.2],[15,6.6],[14,14],[11.8,17.4],[11,17],[8.8,15.4]],
              [[9.4,2.2],[7,12.4],[2,16.6]],
              [[15,3],[16.2,4],[17.4,5.6]],
              [[16.6,1.4],[18,2.6],[19,4]]
            ],
            "ギ":[
              [[3,7.2],[8,6.4],[13.8,5.2]],
              [[2.4,13],[9,11.6],[16.8,10]],
              [[8,2.2],[11,17.8]],
              [[15.2,2.8],[16.4,4],[16.8,4.8]],
              [[17.2,1.4],[18.4,2.6],[19,3.5]]
            ],
            "グ":[
              [[8.4,3.2],[7,6.2],[3.6,9.2]],
              [[8.4,4],[14,3.8],[14.2,4],[11.6,12],[3.8,17.4]],
              [[14.8,2],[16,3.2],[17,4.8]],
              [[16.6,0.8],[17.6,2],[18.4,3]]
            ],
            "ゲ":[
              [[7,3],[5,8],[2.2,10.8]],
              [[5,8],[17,7]],
              [[12,7.6],[10.4,14],[6,17.4]],
              [[14.8,2],[16,3.2],[17,4.8]],
              [[16.6,0.8],[17.6,2],[18.4,3]]
            ],
            "ゴ":[
              [[3.4,6.4],[13.8,5.4],[14.2,5.8],[13,14.8]],
              [[3.2,15.4],[13.4,15]],
              [[14.8,2],[16,3.2],[17,4.8]],
              [[16.6,0.8],[17.6,2],[18.4,3]]
            ],
            "ザ":[
              [[1.4,8],[17.6,7]],
              [[6.4,3.2],[6.4,12]],
              [[13,2.2],[13,13.6],[8.8,17.6]],
              [[15.6,2.6],[16.7,3.6],[17.6,5]],
              [[17.6,1.4],[18.6,2.2],[19.6,3.6]]
            ],
            "ジ":[
              [[4.6,3.2],[7,4.4],[8.8,5.8]],
              [[2.4,8],[5,9],[7,10.4]],
              [[4.8,17],[12,13.4],[16.8,7.2]],
              [[14.8,2],[16,3.2],[17,4.8]],
              [[16.6,0.8],[17.6,2],[18.4,3]]
            ],
            "ズ":[
              [[4.2,5],[12.8,4.6],[13.4,5.2],[10,11.4],[2,16.8]],
              [[10,11.4],[12,12.8],[16,16.2]],
              [[14.8,2],[16,3.2],[17,4.8]],
              [[16.6,0.8],[17.6,2],[18.4,3]]
            ],
            "ゼ":[
              [[2,9.4],[15.4,6],[15.8,6.4],[14,9.6],[12,11.1]],
              [[6.8,3.2],[6.8,14],[8,16.4],[15.2,16.1]],
              [[14.8,2],[16,3.2],[17,4.8]],
              [[16.6,0.8],[17.6,2],[18.4,3]]
            ],
            "ゾ":[
              [[2.6,4.6],[4,6],[6,8.4]],
              [[14.4,4.4],[11.4,13],[5.2,17]],
              [[14.8,2],[16,3.2],[17,4.8]],
              [[16.6,0.8],[17.6,2],[18.4,3]]
            ],
            "ダ":[
              [[8.2,3.2],[6,7.2],[3,9.6]],
              [[7.6,4.4],[13.6,4.4],[14,4.8],[11,12],[7,16],[3.5,17.6]],
              [[6.8,9],[9.2,10.6],[10.8,12.2]],
              [[14.8,2],[16,3.2],[17,4.8]],
              [[16.6,0.8],[17.6,2],[18.4,3]]
            ],
            "ヂ":[
              [[12.6,2.4],[9,4.4],[4.6,5.6]],
              [[2.2,10],[11,9.2],[17,9]],
              [[9.8,4.6],[10,12],[8.6,16],[6,17.5]],
              [[14.8,2],[16,3.2],[17,4.8]],
              [[16.6,0.8],[17.6,2],[18.4,3]]
            ],
            "ヅ":[
              [[2,5],[3.8,7],[4.6,8.8]],
              [[7.2,3.4],[8.6,6],[9,7.6]],
              [[15.2,5.4],[12.6,12.8],[6.8,16.8]],
              [[14.8,2],[16,3.2],[17,4.8]],
              [[16.6,0.8],[17.6,2],[18.4,3]]
            ],
            "デ":[
              [[5,4],[10,3.8],[13,3.4]],
              [[2,9.2],[11,8.6],[16.8,8]],
              [[10,9],[10,14],[6,17.8]],
              [[14.8,2],[16,3.2],[17,4.8]],
              [[16.6,0.8],[17.6,2],[18.4,3]]
            ],
            "ド":[
              [[8,2],[8,17.6]],
              [[8,8.2],[11,9],[15,11.4]],
              [[13.8,2],[15,3.2],[16,4.8]],
              [[15.6,0.8],[16.6,2],[17.4,3]]
            ],
            "バ":[
              [[7,6],[5,11],[2,14]],
              [[13,6.5],[15,9],[17.6,13]],
              [[14.8,2],[16,3.2],[17,4.8]],
              [[16.6,0.8],[17.6,2],[18.4,3]]
            ],
            "ビ":[
              [[15,6.8],[12,7.6],[5.5,8.5]],
              [[5.5,2.6],[5.5,14],[7,16],[16,15.5]],
              [[14.8,2],[16,3.2],[17,4.8]],
              [[16.6,0.8],[17.6,2],[18.4,3]]
            ],
            "ブ":[
              [[2.6,5.4],[14,4.2],[14.8,5],[12,13],[6,16.6]],
              [[14.8,2],[16,3.2],[17,4.8]],
              [[16.6,0.8],[17.6,2],[18.4,3]]
            ],
            "ベ":[
              [[1.6,10.8],[3.6,9],[7,5.6],[7,5.6],[13,11],[18,14.6]],
              [[13.8,3],[15,4.2],[16,5.8]],
              [[15.6,1.8],[16.6,3],[17.4,4]]
            ],
            "ボ":[
              [[3.6,7.1],[7,7],[16.4,6.2]],
              [[10,2],[10.4,17],[9.8,17.2],[7,15.4]],
              [[5.5,10.2],[4,13.4],[2.4,15.2]],
              [[14,10.2],[16,12.8],[17,15.2]],
              [[14.8,2],[16,3.2],[17,4.8]],
              [[16.6,0.8],[17.6,2],[18.4,3]]
            ],
            "パ":[
              [[7,6],[5,11],[2,14]],
              [[13,6.5],[15,9],[17.6,13]],
              [[17.4,2],[18,2.05],[18.8,3.4],[17.4,5],[16,3.4],[16.8,2.05],[17.4,2]]
            ],
            "ピ":[
              [[15,6.8],[12,7.6],[5.5,8.5]],
              [[5.5,2.6],[5.5,14],[7,16],[16,15.5]],
              [[17.4,2],[18,2.05],[18.8,3.4],[17.4,5],[16,3.4],[16.8,2.05],[17.4,2]]
            ],
            "プ":[
              [[2.6,5.4],[14,4.2],[14.8,5],[12,13],[6,16.6]],
              [[17.4,2],[18,2.05],[18.8,3.4],[17.4,5],[16,3.4],[16.8,2.05],[17.4,2]]
            ],
            "ペ":[
              [[1.6,10.8],[3.6,9],[7,5.6],[7,5.6],[13,11],[18,14.6]],
              [[15.4,2],[16,2.05],[16.8,3.4],[15.4,5],[14,3.4],[14.8,2.05],[15.4,2]]
            ],
            "ポ":[
              [[3.6,7.1],[7,7],[16.4,6.2]],
              [[10,2],[10.4,17],[9.8,17.2],[7,15.4]],
              [[5.5,10.2],[4,13.4],[2.4,15.2]],
              [[14,10.2],[16,12.8],[17,15.2]],
              [[18.4,1],[19,1.05],[19.8,2.4],[18.4,4],[17,2.4],[17.8,1.05],[18.4,1]]
            ],
          };

      spdraw=null;
      const charWH=640;
      var charCanvas=null;
      document.addEventListener("DOMContentLoaded",function(){
        // canvas.width, canvas.height 内部で持つ画像データのサイズ
        // canvas.style.width, canvas.style.height 実際に表示されるサイズ
        charCanvas=document.getElementById('charCanvas');
        charCanvas.style.height=window.getComputedStyle(charCanvas).width;
        charCanvas.width=charWH;
        charCanvas.height=charWH;
        window.addEventListener('resize',function(){
          charCanvas.style.height=window.getComputedStyle(charCanvas).width;
        });
        let ctx=charCanvas.getContext('2d');
        let selectChar=document.getElementById("selectChar");
        keys=Object.keys(charArr);
        keys.forEach(function(key){
          let opt=document.createElement("option");
          opt.setAttribute("value",key);
          opt.innerHTML=key;
          selectChar.appendChild(opt);
          for(let i=0;i<charArr[key].length;i++){
            for(let j=0;j<charArr[key][i].length;j++){
              charArr[key][i][j][0]*=32;
              charArr[key][i][j][1]*=32;
            }
          }
        });
        selectChar.addEventListener("change",charSPDraw);
        let td=document.querySelectorAll("table.charTable tr td");
        for(let i=0;i<td.length;i++){
          let c=td[i].innerHTML;
          if(c!==""){
            td[i].innerHTML="<a onclick='charSPDraw2(this)'>"+c+"</a>";
          }
        }
        spdraw=new TSPDraw(ctx,charArr[selectChar.options[selectChar.selectedIndex].value],charWH);
      });
      function charSPDraw(){
        let ctx=charCanvas.getContext('2d');
        spdraw.isEnd=true;
        delete spdraw;
        spdraw=new TSPDraw(ctx,charArr[selectChar.options[selectChar.selectedIndex].value],charWH);
      }
      function charSPDraw2(a){
        let c=a.innerHTML;
        let selectChar=document.getElementById("selectChar");
        for(let i=0;i<selectChar.options.length;i++){
          if(c==selectChar.options[i].value){
            selectChar.selectedIndex=i;
            break;
          }
        }
        let ctx=charCanvas.getContext('2d');
        spdraw.isEnd=true;
        delete spdraw;
        spdraw=new TSPDraw(ctx,charArr[selectChar.options[selectChar.selectedIndex].value],charWH);
      }
    </script>
    <style>
       table.charTable{
       background-color: white;
         border-collapse:collapse;
         border:none;
         font-size:20px;
         margin:0;
         padding:0;
       }
       table.charTable tr{
      background-color: white;
         border:none;
         margin:0;
         padding:0;
       }
       table.charTable tr td{
      background-color: white;
         border:1px #000 solid;
         margin:0;
         padding:0;
       }
       table.charTable tr td a{
      background-color: white;
         text-decoration:none;
         color:blue;
         font-weight:bold;
         cursor:pointer;
       }
       table.charTable tr td a:hover{
      background-color: white;
         text-decoration:none;
         color:blue;
         font-weight:bold;
       }
       table.charTable tr td a:link{
      background-color: white;
         text-decoration:none;
         color:blue;
         font-weight:bold;
       }
    </style>
  </head>
  <body>
    <div class="content">
      <style>
            .item {
        margin: 50px 0 20px 20px;
            }
      </style>

      <div class="container">
        <div class="item">
          <div style="width:100%;">
            <select hidden id="selectChar"></select>
          </div>
          <table class="charTable" id="moji">
            <tr>
              <td>ぱ</td>
              <td>ば</td>
              <td>だ</td>
              <td>ざ</td>
              <td>が</td>
              <td>ん</td>
              <td>わ</td>
              <td>ら</td>
              <td>や</td>
              <td>ま</td>
              <td>は</td>
              <td>な</td>
              <td>た</td>
              <td>さ</td>
              <td>か</td>
              <td>あ</td>
            </tr>
            <tr>
              <td>ぴ</td>
              <td>び</td>
              <td>ぢ</td>
              <td>じ</td>
              <td>ぎ</td>
              <td></td>
              <td></td>
              <td>り</td>
              <td></td>
              <td>み</td>
              <td>ひ</td>
              <td>に</td>
              <td>ち</td>
              <td>し</td>
              <td>き</td>
              <td>い</td>
            </tr>
            <tr>
              <td>ぷ</td>
              <td>ぶ</td>
              <td>づ</td>
              <td>ず</td>
              <td>ぐ</td>
              <td></td>
              <td></td>
              <td>る</td>
              <td>ゆ</td>
              <td>む</td>
              <td>ふ</td>
              <td>ぬ</td>
              <td>つ</td>
              <td>す</td>
              <td>く</td>
              <td>う</td>
            </tr>
            <tr>
              <td>ぺ</td>
              <td>べ</td>
              <td>で</td>
              <td>ぜ</td>
              <td>げ</td>
              <td></td>
              <td></td>
              <td>れ</td>
              <td></td>
              <td>め</td>
              <td>へ</td>
              <td>ね</td>
              <td>て</td>
              <td>せ</td>
              <td>け</td>
              <td>え</td>
            </tr>
            <tr>
              <td>ぽ</td>
              <td>ぼ</td>
              <td>ど</td>
              <td>ぞ</td>
              <td>ご</td>
              <td></td>
              <td>を</td>
              <td>ろ</td>
              <td>よ</td>
              <td>も</td>
              <td>ほ</td>
              <td>の</td>
              <td>と</td>
              <td>そ</td>
              <td>こ</td>
              <td>お</td>
            </tr>
          </table>

          <table class="charTable" id="moji2">
            <br>
            <tr>
              <td>パ</td>
              <td>バ</td>
              <td>ダ</td>
              <td>ザ</td>
              <td>ガ</td>
              <td>ン</td>
              <td>ワ</td>
              <td>ラ</td>
              <td>ヤ</td>
              <td>マ</td>
              <td>ハ</td>
              <td>ナ</td>
              <td>タ</td>
              <td>サ</td>
              <td>カ</td>
              <td>ア</td>
            </tr>
            <tr>
              <td>ピ</td>
              <td>ビ</td>
              <td>ヂ</td>
              <td>ジ</td>
              <td>ギ</td>
              <td></td>
              <td>リ</td>
              <td></td>
              <td></td>
              <td>ミ</td>
              <td>ヒ</td>
              <td>ニ</td>
              <td>チ</td>
              <td>シ</td>
              <td>キ</td>
              <td>イ</td>
            </tr>
            <tr>
              <td>プ</td>
              <td>ブ</td>
              <td>ヅ</td>
              <td>ズ</td>
              <td>グ</td>
              <td></td>
              <td></td>
              <td>ル</td>
              <td>ユ</td>
              <td>ム</td>
              <td>フ</td>
              <td>ヌ</td>
              <td>ツ</td>
              <td>ス</td>
              <td>ク</td>
              <td>ウ</td>
            </tr>
            <tr>
              <td>ペ</td>
              <td>ベ</td>
              <td>デ</td>
              <td>ゼ</td>
              <td>ゲ</td>
              <td></td>
              <td>レ</td>
              <td></td>
              <td></td>
              <td>メ</td>
              <td>ヘ</td>
              <td>ネ</td>
              <td>テ</td>
              <td>セ</td>
              <td>ケ</td>
              <td>エ</td>
            </tr>
            <tr>
              <td>ポ</td>
              <td>ボ</td>
              <td>ド</td>
              <td>ゾ</td>
              <td>ゴ</td>
              <td></td>
              <td>ヲ</td>
              <td>ロ</td>
              <td>ヨ</td>
              <td>モ</td>
              <td>ホ</td>
              <td>ノ</td>
              <td>ト</td>
              <td>ソ</td>
              <td>コ</td>
              <td>オ</td>
            </tr>
          </table>

          <br>

          <style>
.button{
    font-size: 300%;
}
</style>
          <input
            class="button"
            type="button"
            id="myButton"
            value="みる"
            style="width:335px;height:118px;"
          />
          <br>
          <br>
          <input
            class="button"
            type="button"
            id="clearButtonId"
            value="けす"
            style="width:335px;height:118px;"
          />
        </div>
        
        <div class="item">
          <div style="width:100%;margin:0;padding:0;">
            <canvas
              id="charCanvas"
              style="width:298px;height:298px;max-width:100%;border:1px solid #000;"
            ></canvas>
          </div>
          <br>
          <style>
            canvas {
              border: 1px solid black;
            }
          </style>

          <script>
            function TMamHandwritten(drawCanvasId, clearButtonId) {
              'use strict';
              this.drawCanvasId = drawCanvasId;
              this.clearButtonId = clearButtonId;
              this.isMouseDown = false;
              this.position = [];
              this.position.x = 0;
              this.position.y = 0;
              this.position.px = 0;
              this.position.py = 0;
              this.rate = [];
              this.rate.x = 0;
              this.rate.y = 0;
              this.can = null;
              this.ctx = null;
              this.clearButton = null;
              this.strokeCount = 0;

              window.addEventListener("DOMContentLoaded", function() {
                this.can = document.getElementById(this.drawCanvasId);
                this.can.addEventListener("touchstart", this.onDown.bind(this), { passive: false });
                this.can.addEventListener("touchmove", this.onMove.bind(this), { passive: false });
                this.can.addEventListener("touchend", this.onUp.bind(this));
                this.can.addEventListener("mousedown", this.onMouseDown.bind(this));
                this.can.addEventListener("mousemove", this.onMouseMove.bind(this));
                this.can.addEventListener("mouseup", this.onMouseUp.bind(this));
                window.addEventListener("mousemove", this.stopShake.bind(this));
                this.ctx = this.can.getContext("2d");

            if (document.getElementById(this.clearButtonId)) {
              this.clearButton = document.getElementById(this.clearButtonId);
              this.clearButton.addEventListener("click", function() {
                this.ctx.clearRect(0, 0, this.can.width, this.can.height);
                this.strokeCount = 0;
                this.drawGrid();
                this.ctx.fillStyle = "rgb(255,255,255)";
                this.ctx.fillRect(0, 0, this.can.width, this.can.height);
                this.ctx.strokeStyle = "rgb(150,150,150)";
                this.ctx.lineWidth = 2;
                this.ctx.beginPath();
                this.ctx.moveTo(0, this.can.height / 2);
                this.ctx.lineTo(this.can.width, this.can.height / 2);
                this.ctx.moveTo(this.can.width / 2, 0);
                this.ctx.lineTo(this.can.width / 2, this.can.height);
                this.ctx.stroke();
              }.bind(this));
            }

                let style = document.createElement("style");
                document.head.appendChild(style);
                style.sheet.insertRule('canvas#' + this.drawCanvasId + '{-ms-touch-action:none;touch-action:none;}', 0);
                let s = window.getComputedStyle(this.can);
                this.rate.x = parseInt(this.can.width) / parseInt(s.width);
                this.rate.y = parseInt(this.can.height) / parseInt(s.height);

                this.ctx.fillStyle = "rgb(255,255,255)";
                this.ctx.fillRect(0, 0, this.can.width, this.can.height);
                this.drawGrid();
              }.bind(this));

              this.onDown = function(event) {
                this.isMouseDown = true;
                this.position.px = event.touches[0].pageX - event.target.getBoundingClientRect().left - this.getScrollPosition().x;
                this.position.py = event.touches[0].pageY - event.target.getBoundingClientRect().top - this.getScrollPosition().y;
                this.position.x = this.position.px;
                this.position.y = this.position.py;
                this.drawLine();
                event.preventDefault();
                event.stopPropagation();
              }

              this.onMove = function(event) {
                if (this.isMouseDown) {
                  this.position.x = event.touches[0].pageX - event.target.getBoundingClientRect().left - this.getScrollPosition().x;
                  this.position.y = event.touches[0].pageY - event.target.getBoundingClientRect().top - this.getScrollPosition().y;
                  this.drawLine();
                  this.position.px = this.position.x;
                  this.position.py = this.position.y;
                  event.stopPropagation();
                }
              }

              this.onUp = function(event) {
                this.isMouseDown = false;
                this.strokeCount++;
                event.stopPropagation();
              }

              this.onMouseDown = function(event) {
                this.position.px = event.clientX - event.target.getBoundingClientRect().left;
                this.position.py = event.clientY - event.target.getBoundingClientRect().top;
                this.position.x = this.position.px;
                this.position.y = this.position.py;
                this.drawLine();
                this.isMouseDown = true;
                event.stopPropagation();
              }

              this.onMouseMove = function(event) {
                if (this.isMouseDown) {
                  this.position.x = event.clientX - event.target.getBoundingClientRect().left;
                  this.position.y = event.clientY - event.target.getBoundingClientRect().top;
                  this.drawLine();
                  this.position.px = this.position.x;
                  this.position.py = this.position.y;
                  event.stopPropagation();
                }
              }

              this.onMouseUp = function(event) {
                this.isMouseDown = false;
                this.strokeCount++;
                event.stopPropagation();
              }

              this.stopShake = function(event) {
                this.isMouseDown = false;
                event.stopPropagation();
              }

              this.drawLine = function() {
                this.ctx.lineWidth = 11;//手書きの線の太さ
                this.ctx.lineJoin = "round";
                this.ctx.lineCap = "round";

                switch (this.strokeCount) {
                  case 0:
                    this.ctx.strokeStyle = "rgb(255, 100, 100)";
                    break;
                  case 1:
                    this.ctx.strokeStyle = "rgb(100, 100, 255)";
                    break;
                  case 2:
                    this.ctx.strokeStyle = "rgb(100, 255, 100)";
                    break;
                  case 3:
                    this.ctx.strokeStyle = "rgb(255, 165, 0)";
                    break;
                  case 4:
                    this.ctx.strokeStyle = "rgb(160, 32, 273)";
                    break;
                  default:
                    this.ctx.strokeStyle = "rgb(150, 150, 150)";
                    break;
                }

                this.ctx.beginPath();
                this.ctx.moveTo(this.position.px * this.rate.x, this.position.py * this.rate.y);
                this.ctx.lineTo(this.position.x * this.rate.x, this.position.y * this.rate.y);
                this.ctx.stroke();
              }

              this.drawGrid = function() {
                this.ctx.strokeStyle = "rgb(150,150,150)";
                this.ctx.lineWidth = 2;
                this.ctx.beginPath();
                this.ctx.moveTo(0, this.can.height / 2);
                this.ctx.lineTo(this.can.width, this.can.height / 2);
                this.ctx.moveTo(this.can.width / 2, 0);
                this.ctx.lineTo(this.can.width / 2, this.can.height);
                this.ctx.stroke();
              }

              this.getScrollPosition = function() {
                return {
                  "x": document.documentElement.scrollLeft || document.body.scrollLeft,
                  "y": document.documentElement.scrollTop || document.body.scrollTop
                };
              }

            }

            var mamHandwritten1 = new TMamHandwritten("drawCanvasId", "clearButtonId");


var link = document.getElementById("moji");


link.addEventListener("click", function() {
  mamHandwritten1.clearButton.click();
});

var link = document.getElementById("moji2");


link.addEventListener("click", function() {
  mamHandwritten1.clearButton.click();
});
          </script>

          <div>
            <canvas
              id="drawCanvasId"
              width="298px"
              height="298px"
              style="width:298px;height:298px;max-width:100%;border:1px solid #000;"
            ></canvas>
          </div>
        </div>
      </div>
    </div>
  <script>
    // ボタンがクリックされた時の処理を設定
    myButton.addEventListener("click", function() {
      charSPDraw();
      charSPDraw2();
    });
  </script>
<script>
var voices = [];
//事前に音声一覧を取得する
if(window.speechSynthesis.onvoiceschanged==null){
  window.speechSynthesis.onvoiceschanged = function(){
    voices = window.speechSynthesis.getVoices();
    }
  }
function speech(){
  const uttr = new SpeechSynthesisUtterance(document.getElementById("selectChar").value);
  // 話す速度 0.(遅い)～1.0(標準)～2.0(速い)
  uttr.rate=0.4;
  // 言語 (日本語:ja-JP, アメリカ英語:en-US, イギリス英語:en-GB, 中国語:zh-CN, 韓国語:ko-KR)
  uttr.lang="ja-JP"
  // ピッチ（声の高さ） 0.0(低め)～1.0(標準)～2.0(高め)
  uttr.pitch=1.5;
  // お話が完了したときの関数
  uttr.onend=function(){
    //alert("お話終了");
  }

  //日本語の音声は、以下のような値から選べる。選ばない場合はデフォルト設定
  uttr.voice=window.speechSynthesis.getVoices().filter(
    voice => voice.name==='Microsoft Haruka - Japanese (Japan)' //Edge,Chromeのみ可
    //voice => voice.name==='Microsoft Nanami Online (Natural) - Japanese (Japan)' //Edgeのみ可
    //voice => voice.name==='Microsoft Ayumi - Japanese (Japan)' //Edge,Chromeのみ可
    //voice => voice.name==='Microsoft Haruka - Japanese (Japan)' //Edge,Chromeのみ可
    //voice => voice.name==='Microsoft Ichiro - Japanese (Japan)' //Edge,Chromeのみ可
    //voice => voice.name==='Microsoft Sayaka - Japanese (Japan)' //Edge,Chromeのみ可
    //voice => voice.name==='Google 日本語' //Chromeのみ可
  )[0];

  window.speechSynthesis.cancel();
  // お話しする
  window.speechSynthesis.speak(uttr);

  //お話の一時停止
  //window.speechSynthesis.pause();
  //お話の再開
  //window.speechSynthesis.resume();
  //お話の終了
  //window.speechSynthesis.cancel();
}
window.addEventListener("load",function(){
  //ボタンを押すと「speech」関数を呼び出す
  document.getElementById("speech_button").addEventListener("click",speech);
});

var link = document.getElementById("moji");
var link2 = document.getElementById("moji2");
    link.addEventListener("click", function() {
      speech();
    });
    link2.addEventListener("click", function() {
      speech();
    });
</script>

  </body>
</html>
